# MEMORY.md - 长期记忆

> 这是我的核心知识库，记录重要的知识、经验和洞察。
> 每日日志在 memory/ 目录，学习总结在 learnings/ 目录。

## 🧠 核心知识库

### 技术知识
- 2026-02-21：处理 ikuuu 这类页面混淆场景时，需先尝试解码页面中超长 base64 包裹内容，再在可见文本层提取“剩余流量”等字段；比直接依赖原始 DOM/正则更稳定。
- 2026-02-22：流量展示文案应优先采用“当前/可用流量”这类语义稳定表述，避免对站点字段名（如“总流量”）强耦合。
- 2026-02-22：自动更新监控任务宜采用“有更新才提醒/执行、无更新静默”的通知策略，降低告警噪音。
- 2026-02-22：已落地每日自动更新监控任务（检测到更新即提醒并自动升级），可作为后续类似运维任务的默认模板。
- 2026-02-24：接入 nullbr-sse（mcporter）后，统一采用自然语言触发约定 `搜 <关键词>`、`tmdb_id: <id>`、`tmdb_id: <id> 资源 <类型>`，可显著降低查询操作复杂度并提升群聊复用性。
- 2026-02-24：查询资源时优先返回 115；参数含 `resource_type` 时优先用 JSON `--args` 传参（如 `"115"`）以规避类型解析问题。
- 2026-02-24：`mcporter config add ... api_key=...` 可快速接入，但长期应迁移为环境变量注入，避免明文 Key 出现在命令历史与配置中。
- 2026-02-25：EvoMap Evolver 采用 `.env + crontab` 的轻量守护方案：`@reboot lifecycle start` + `*/5 lifecycle check`，可实现开机自启与异常自动拉起。


### 踩坑记录
（记录遇到的问题和解决方案）

### 经验教训
- 每日 00:00 的学习总结依赖 `memory/YYYY-MM-DD.md`；若当日未写日志，会导致总结内容为空，需在白天及时补记关键事项。
- 若要复盘“刚过去的一天”，应优先读取“昨日日志”（`memory/前一日日期.md`）；否则在 00:00 读取当天文件大概率为空。
- 2026-02-16 再次验证：午夜执行总结时若 `memory/当日.md` 缺失，只能产出空摘要；应通过白天持续记日志来保证总结质量。
- 2026-02-17 再次验证：`memory/2026-02-17.md` 在 00:00 不存在，学习总结无可提取内容；需坚持白天记日志，或单独设“昨日日志复盘”任务。
- 2026-02-18 再次验证：`memory/2026-02-18.md` 在 00:00 不存在，本次总结仅能记录流程性经验；建议将总结任务改为读取昨日日志，或把执行时间调整到当日有内容沉淀之后。
- 2026-02-18 00:20 验证“昨日日志复盘”流程：`memory/2026-02-17.md` 缺失时应明确输出“无日志可提取”；同时发现仅有主题化文件（如 `memory/2026-02-17-http-401-authentication-error-.md`）会导致按标准日期路径检索失败，需保持 `memory/YYYY-MM-DD.md` 主日志同步维护。
- 2026-02-19 00:00 再次按“昨日日志”执行：`memory/2026-02-18.md` 缺失，学习总结应明确标注“无日志可提取”；结论不变——需优先维护标准主日志文件，主题化补充文件不能替代主日志。
- 2026-02-19 23:55 执行“基于当日日志”的总结时，`memory/2026-02-19.md` 仍缺失；再次说明若未在白天写主日志，夜间总结只能输出流程性内容。
- 2026-02-20 00:00 按“昨日日志复盘”执行时，`memory/2026-02-19.md` 依旧缺失，学习总结需明确标注“无日志可提取”；后续应确保每日维护标准主日志，避免连续空复盘。
- 2026-02-20 23:55 按“基于当日日志”执行时，`memory/2026-02-20.md` 仍不存在；结论再次确认：若白天未维护主日志，夜间总结只能产出流程性内容。
- 2026-02-21 00:00 按“昨日日志复盘”执行时，`memory/2026-02-20.md` 缺失，本次学习总结明确标注“无日志可提取”；后续继续坚持每日维护标准主日志。
- 2026-02-22 00:00 按“昨日日志复盘”执行时，`memory/2026-02-21.md` 有效且内容可提取；再次验证“白天持续维护标准主日志”可显著提升夜间总结质量。
- 2026-02-26 00:00 按“昨日日志复盘”执行时，`memory/2026-02-25.md` 缺失；结论继续成立：若未维护标准主日志，学习总结只能输出流程性经验。
- 2026-02-26 23:55 执行“基于当日日志”总结前，已补建 `memory/2026-02-26.md`，验证“当日补齐标准主日志”可避免夜间复盘空转。

## 👤 关于用户
- **名字**：
- **位置**：
- **偏好**：
  - 希望我在自动化运维与文档整理中，主动做提醒（尤其定时任务、日志、推送链路）。
  - 偏好中文沟通。
  - 2026-02-22：相册方案继续使用飞牛相册，不再部署 Immich。

## 📁 重要路径
- `~/.openclaw/workspace/`：主工作区（所有核心文档与记忆文件）
- `~/.openclaw/workspace/MEMORY.md`：长期记忆（精华沉淀）
- `~/.openclaw/workspace/memory/`：每日日志目录
- `~/.openclaw/workspace/learnings/`：学习总结目录
- `~/.openclaw/workspace/HEARTBEAT.md`：心跳检查清单
- `~/.openclaw/openclaw.json`：OpenClaw 主配置文件
- `/etc/systemd/system/openclaw-gateway.service`：网关 systemd 服务文件
- `~/.openclaw/openclaw.env`：运行时环境变量（API Key 等）
- `~/.openclaw/shared-knowledge/`：共享知识库目录
- `~/.openclaw/shared-knowledge/knowledge/`：共享知识条目目录
- `/vol2/1000/docker`：所有 Docker 配置文件目录
- `~/.openclaw/workspace/integrations/evolver/`：EvoMap Evolver 安装目录（主程序）
- `~/.openclaw/workspace/integrations/evolver/.env`：Evolver 运行参数（A2A 节点ID/密钥/心跳等）
- `~/.openclaw/workspace/logs/evolver_lifecycle.log`：Evolver 生命周期守护日志（开机拉起/巡检）
- `~/.openclaw/workspace/logs/evolver_loop.log`：Evolver 循环运行日志

## 🧷 记录规范（重要）
- 后续新增路径、规则、流程时，**必须添加中文备注**，避免后期遗忘与误用。
- 我需要在关键节点主动提醒你（如：定时任务状态、推送异常、凭据轮换、日志维护）。

---
*最后更新：2026-02-26*
